@echo on

if "%1"=="-?" goto usage
if "%1"=="/?" goto usage
if "%1"=="-h" goto usage
if "%1"=="/h" goto usage

if "%1"=="" goto usage
set TARGET_ARCH=%1
shift

if "%1"=="" goto usage
set TARGET_OS=%1
shift

echo Target architecture: %TARGET_ARCH%
echo Target OS: %TARGET_OS%

del Debug /S /Q
del Release /S /Q
del ..\Source\build*%TARGET_ARCH%*.log /S /Q
del ..\Source\obj /S /Q
for /d %%d in (..\Source\main\obj*%TARGET_ARCH%*) do rd /S /Q "%%d"
for /d %%d in (..\bin\plugin\%TARGET_OS%\%TARGET_ARCH%) do rd /S /Q "%%d"

goto :EOF

:usage
@echo Usage: %0 ^<I386^|x64^> ^<WIN7^|WLH^|WXP^|WNET^>
@echo Example: %0 I386 WIN7
goto :EOF
